# Test Environment Configuration
# Used for running tests in isolated environment

# ============================================
# Rust Service Configuration
# ============================================

RUST_LOG=jessy=debug,actix_web=info
RUST_BACKTRACE=1
RUST_ENV=test
RUST_HOST=0.0.0.0
RUST_PORT=8080

# Use temporary directories for tests
MMAP_BASE_PATH=/tmp/jessy_test/mmap
MMAP_INITIAL_SIZE=1048576
MMAP_MAX_SIZE=10485760

MAX_DIMENSIONS=100
DEFAULT_FREQUENCY=1.0
FREQUENCY_TOLERANCE=0.1

# ============================================
# Go API Configuration
# ============================================

GO_ENV=test
PORT=3000
HOST=0.0.0.0
RUST_SERVICE_URL=http://jessy-core:8080
LOG_LEVEL=debug

API_TIMEOUT=30s
API_MAX_BODY_SIZE=10485760

# Disable rate limiting in tests
RATE_LIMIT_ENABLED=false

# ============================================
# Testing Configuration
# ============================================

RUST_TEST_THREADS=1
CARGO_TERM_COLOR=always

TEST_RUST_SERVICE_URL=http://jessy-core:8080
TEST_API_SERVICE_URL=http://jessy-api:3000

# ============================================
# Docker Configuration
# ============================================

DOCKER_PLATFORM=linux/arm64
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1

UID=1000
GID=1000

# ============================================
# Test-Specific Settings
# ============================================

# Disable features that slow down tests
ENABLE_METRICS=false
ENABLE_TRACING=false
ENABLE_PROFILING=false

# Use smaller values for faster tests
MAX_CONNECTIONS=10
MIN_CONNECTIONS=2
CACHE_TTL=60
CACHE_MAX_SIZE=10485760

# Disable hot reload in tests
HOT_RELOAD_ENABLED=false

# Enable debug endpoints for testing
ENABLE_DEBUG_ENDPOINTS=true
ENABLE_EXPERIMENTAL_FEATURES=true
